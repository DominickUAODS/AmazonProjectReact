import { useNavigate, useLocation } from 'react-router-dom';
import { useAuth } from '../Helpers/AuthContext';
import styles from './Header.module.css'
import { useState } from 'react';
import CartModal from '../CartModal/CartModal';

export default function Header() {
	const navigate = useNavigate();
	const location = useLocation();
	const { isAuthenticated } = useAuth();
	const [isCartOpen, setIsCartOpen] = useState(false);

	const openSignUp = () => {
		if (isAuthenticated) {
			navigate("/settings");
		} else {
			navigate("/signUp", { state: { background: location } });
		}
	};

	const openCart = () => {
		setIsCartOpen(true);
	}

	const closeCart = () => {
		setIsCartOpen(false);
	}

	return <>
		<div className={styles.header}>
			<div className={styles.mainLogoCont}>
				<div className={styles.menu}>
					<svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
						<path d="M4 9.55273H28" stroke="#F2F4F8" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round" />
						<path d="M4 15.9512H28" stroke="#F2F4F8" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round" />
						<path d="M4 22.4473H28" stroke="#F2F4F8" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round" />
					</svg>
				</div>
				<div className={styles.logo}>
					<svg width="81" height="32" viewBox="0 0 102 40" fill="none" xmlns="http://www.w3.org/2000/svg">
						<path d="M40.9721 28.4889V29.1803C40.9721 29.6298 40.6148 29.987 40.1654 29.987H26.7398C26.2904 29.987 25.9332 29.6298 25.9332 29.1803V28.4889C25.9332 28.0394 26.2904 27.6822 26.7398 27.6822H40.1654C40.6033 27.6707 40.9721 28.0394 40.9721 28.4889ZM40.1654 18.8432H26.7398C26.2904 18.8432 25.9332 19.2005 25.9332 19.6499V20.3414C25.9332 20.7908 26.2904 21.1481 26.7398 21.1481H40.1654C40.6148 21.1481 40.9721 20.7908 40.9721 20.3414V19.6499C40.9721 19.212 40.6148 18.8432 40.1654 18.8432ZM40.1538 10.0273H26.7283C26.2789 10.0273 25.9216 10.3846 25.9216 10.834V11.5255C25.9216 11.9749 26.2789 12.3322 26.7283 12.3322H40.1538C40.6033 12.3322 40.9605 11.9749 40.9605 11.5255V10.834C40.9605 10.3846 40.6033 10.0273 40.1538 10.0273Z" fill="#F2F4F8" />
						<path d="M73.5124 29.9737C73.2128 29.9737 72.9247 29.8585 72.6942 29.628L64.0512 20.6392C63.717 20.305 63.6248 19.8095 63.7976 19.3716C63.9705 18.9337 64.3969 18.6571 64.8579 18.6456C67.9463 18.6341 69.2255 17.9196 69.7671 17.3203C70.1704 16.8709 70.3318 16.2832 70.2511 15.5341C70.0783 13.6902 68.3957 12.2497 66.4251 12.2497H60.1215C59.4877 12.2497 58.9691 11.7312 58.9691 11.0858C58.9691 10.4405 59.4877 9.92188 60.1215 9.92188H66.4251C69.5712 9.92188 72.2678 12.2958 72.5444 15.3267C72.6712 16.7326 72.3024 17.9657 71.4727 18.8991C70.7006 19.7519 69.5827 20.3511 68.0846 20.6738C67.8195 20.7314 67.7158 21.0541 67.9002 21.25L74.3076 27.9801C74.757 28.4295 74.757 29.167 74.3076 29.628C74.1002 29.8585 73.8005 29.9737 73.5124 29.9737ZM17.471 9.9334H11.1673C10.5335 9.9334 10.0149 10.4635 10.0149 11.1089V28.8098C10.0149 29.4551 10.5335 29.9853 11.1673 29.9853C11.8011 29.9853 12.3197 29.4551 12.3197 28.8098V12.63C12.3197 12.4341 12.481 12.2728 12.6654 12.2728H17.4594C19.43 12.2728 21.1126 13.7248 21.2854 15.5802C21.3546 16.3408 21.1932 16.9285 20.8014 17.3779C20.2713 17.9772 18.9806 18.6917 15.8922 18.7147C15.2583 18.7147 14.7398 19.2448 14.7513 19.8902C14.7513 20.5355 15.2699 21.0541 15.9037 21.0541C19.1074 21.0426 21.2624 20.3511 22.507 18.9452C23.3367 18.0118 23.717 16.7672 23.5787 15.3497C23.3137 12.3189 20.6285 9.9334 17.471 9.9334ZM90.5335 9.9334C89.8996 9.9334 89.381 10.475 89.381 11.1319V17.3549C89.381 18.0463 89.3926 17.9887 89.381 18.4958C89.3695 18.853 89.1506 19.0028 88.8855 19.0605C87.1223 19.1987 84.2413 19.4062 82.3859 18.7378C79.8046 17.8043 79.6086 15.246 79.6086 11.4431V11.1434C79.6086 10.475 79.0901 9.94492 78.4562 9.94492C77.8224 9.94492 77.3038 10.4866 77.3038 11.1434V11.4431C77.3038 14.8196 77.2923 19.4523 81.6254 21.008C82.8123 21.4344 84.322 21.5842 85.9584 21.5842C86.9264 21.5842 87.9521 21.5266 88.9662 21.4575C89.1736 21.4459 89.3349 21.6073 89.3349 21.8147C89.3349 22.414 89.3349 23.14 89.3349 24.0273C89.3349 24.811 89.0238 25.4909 88.413 26.0786C87.3067 27.1388 85.3015 27.7265 83.4116 27.5422C81.4064 27.3462 80.0466 26.3782 79.1362 24.4768C78.8481 23.8775 78.1566 23.647 77.5919 23.9351C77.0273 24.2348 76.7968 24.9492 77.0734 25.5485C78.341 28.1875 80.4038 29.6626 83.2042 29.9392C83.5153 29.9737 83.8264 29.9853 84.1376 29.9853C86.3848 29.9853 88.5628 29.2016 89.9803 27.8648C91.0751 26.8161 91.6628 25.5024 91.6628 24.0388C91.6628 20.9158 91.6743 19.821 91.6859 18.9913C91.6859 18.4843 91.6974 18.0694 91.6974 17.3779V11.1549C91.6859 10.4635 91.1673 9.9334 90.5335 9.9334ZM52.2275 21.3998C52.0316 21.2039 52.1353 20.8697 52.4119 20.8121C53.91 20.4779 55.0278 19.8787 55.8 19.0144C56.6297 18.0694 57.01 16.8248 56.8717 15.3958C56.5836 12.3304 53.8985 9.9334 50.7524 9.9334H44.4488C43.8149 9.9334 43.2964 10.4635 43.2964 11.1089V28.7983C43.2964 29.4551 43.8149 29.9737 44.4488 29.9737C45.0826 29.9737 45.6012 29.4436 45.6012 28.7983V12.6531C45.6012 12.4572 45.7625 12.2958 45.9469 12.2958H50.7409C52.7115 12.2958 54.394 13.7594 54.5669 15.6263C54.636 16.3984 54.4747 16.9861 54.0829 17.4356C53.5528 18.0348 52.2621 18.7608 49.1736 18.7724C48.7127 18.7724 48.2863 19.0605 48.1134 19.4984C47.9406 19.9363 48.0327 20.4433 48.3669 20.7775L57.01 29.6165C57.4594 30.0774 58.1854 30.0774 58.6349 29.6165C59.0843 29.1555 59.0843 28.4065 58.6349 27.9455L52.2275 21.3998Z" fill="#F2F4F8" />
					</svg>
				</div>
			</div>

			<div className={styles.searchCont}>
				<input type="text" placeholder="Search..." className={styles.input}></input>
				<button className={styles.searchButton}>
					<svg width="24" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">
						<path d="M14.6857 14.1056C13.6057 15.5216 11.1157 16.1996 9.99971 16.1996C6.51971 16.1996 3.69971 13.3796 3.69971 9.89961C3.69971 6.41961 6.51971 3.59961 9.99971 3.59961C13.4797 3.59961 16.2997 6.41961 16.2997 9.89961C16.2997 10.5836 16.1917 11.2436 15.9877 11.8616" stroke="#0E2042" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round" />
						<path d="M21.6998 20.3995L14.6858 14.1055" stroke="#0E2042" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round" />
					</svg>
				</button>
			</div>

			<div className={styles.iconsCont}>
				<button className={styles.userButton} onClick={openSignUp}>
					<svg width="33" height="32" viewBox="0 0 33 32" fill="none" xmlns="http://www.w3.org/2000/svg">
						<path d="M26.4118 27.9913C26.4118 24.0953 24.8758 19.5273 21.2518 17.5113C20.5158 17.1033 19.6918 16.7993 18.7798 16.6233C18.7798 16.6233 16.9238 16.0953 13.9318 16.6233C13.0198 16.7833 12.1958 17.1033 11.4598 17.5113C7.8358 19.5273 6.2998 24.0953 6.2998 27.9913" stroke="#F2F4F8" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round" />
						<path d="M16.5159 4.75C19.0928 4.75001 21.1819 6.83906 21.1819 9.41602C21.1819 11.993 19.0928 14.082 16.5159 14.082C13.9389 14.082 11.8499 11.993 11.8499 9.41602C11.8499 6.83906 13.9389 4.75 16.5159 4.75Z" stroke="#F2F4F8" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round" />
					</svg>
				</button>
				<button className={styles.cartButton} onClick={openCart}>
					<svg width="33" height="32" viewBox="0 0 33 32" fill="none" xmlns="http://www.w3.org/2000/svg">
						<path d="M4.69971 5.74414H7.73971C10.4197 5.74414 9.65171 9.51214 9.26771 11.1361C8.74771 13.3201 8.90771 15.6481 11.5077 16.2801C12.0277 16.4081 12.5637 16.4481 13.0917 16.4481H22.3237C22.3237 16.4481 22.5797 16.4481 22.9637 16.4961C25.6757 16.8241 25.4677 20.3761 22.7397 20.4001C22.7077 20.4001 22.6677 20.4001 22.6357 20.4001H12.2757" stroke="#F2F4F8" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round" />
						<path d="M12.7239 6.63281H27.3559C28.4199 6.63281 29.0599 7.82481 28.4679 8.71281L24.7479 14.2888" stroke="#F2F4F8" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round" />
						<path d="M13.7078 26.2575C14.6931 26.2575 15.4918 25.4587 15.4918 24.4735C15.4918 23.4882 14.6931 22.6895 13.7078 22.6895C12.7226 22.6895 11.9238 23.4882 11.9238 24.4735C11.9238 25.4587 12.7226 26.2575 13.7078 26.2575Z" stroke="#F2F4F8" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round" />
						<path d="M22.6275 26.2575C23.6128 26.2575 24.4115 25.4587 24.4115 24.4735C24.4115 23.4882 23.6128 22.6895 22.6275 22.6895C21.6422 22.6895 20.8435 23.4882 20.8435 24.4735C20.8435 25.4587 21.6422 26.2575 22.6275 26.2575Z" stroke="#F2F4F8" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round" />
					</svg>
				</button>
			</div>
		</div>
		{isCartOpen && <CartModal onClose={closeCart} />}
	</>;
}